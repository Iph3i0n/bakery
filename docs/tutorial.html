<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bakery Docs</title>
    <script src="/js/utils.js"></script>
    <script>
      window.CODE_EXAMPLES = {
        cdn_install: e("script", {
          src: "https://cdn.jsdelivr.net/npm/@paulpopat/bakery",
        }),
        form: {
          text: {
            basic: e("f-input", { name: "test" }, "Hello World"),
          },
          select: {
            basic: e(
              "f-select",
              { name: "test-select" },
              e("option", { value: "value-1" }, "First Value"),
              e("option", { value: "value-2" }, "Second Value"),
              e("option", { value: "value-3" }, "Third Value"),
              e("option", { value: "value-4" }, "Fourth Value"),
              e("option", { value: "value-5" }, "Fifth Value"),
              e("span", { slot: "label" }, "Hello world")
            ),
          },
          multiselect: {
            basic: e(
              "f-multiselect",
              { name: "test-multiselect" },
              e("option", { value: "value-1" }, "First Value"),
              e("option", { value: "value-2" }, "Second Value"),
              e("option", { value: "value-3" }, "Third Value"),
              e("option", { value: "value-4" }, "Fourth Value"),
              e("option", { value: "value-5" }, "Fifth Value"),
              e("span", { slot: "label" }, "Hello world")
            ),
          },
          singleselect: {
            basic: e(
              "f-singleselect",
              { name: "test-singleselect" },
              e("option", { value: "value-1" }, "First Value"),
              e("option", { value: "value-2" }, "Second Value"),
              e("option", { value: "value-3" }, "Third Value"),
              e("option", { value: "value-4" }, "Fourth Value"),
              e("option", { value: "value-5" }, "Fifth Value"),
              e("span", { slot: "label" }, "Hello world")
            ),
          },
          textarea: {
            basic: e("f-textarea", { name: "test-textarea" }, "Hello World"),
          },
          date: {
            basic: e("f-date", { name: "test-date" }, "Hello World"),
          },
          toggle: {
            basic: e(
              "f-toggle",
              { name: "test-toggle" },
              "Which do you pick?",
              e("span", { slot: "off" }, "Option One"),
              e("span", { slot: "on" }, "Option Two")
            ),
          },
        },
        fetch: {
          external: {
            basic: e(
              "u-fetch",
              { url: "/examples/fetch-example.json", key: "data" },
              e("t-paragraph", {}, e("u-text", { use: "data.example_text" }))
            ),
            locale: e(
              "u-fetch",
              {
                url: "/examples/{locale}/locale-example.json",
                key: "data",
                fallback: "/examples/fetch-example.json",
              },
              e("t-paragraph", {}, e("u-text", { use: "data.example_text" }))
            ),
          },
          global: {
            basic: e(
              "u-global",
              { var: "TEST_TEXT", key: "text" },
              e("t-paragraph", {}, e("u-text", { use: "text.title" }))
            ),
          },
          each: {
            basic: e(
              "u-fetch",
              { url: "/examples/fetch-example.json", key: "data" },
              e("u-each", { subject: "data.repeated", key: "text" }),
              e("t-paragraph", {}, e("u-text", { use: "text" }))
            ),
          },
          if: {
            basic: e(
              "u-fetch",
              { url: "/examples/fetch-example.json", key: "data" },
              e(
                "u-if",
                { check: "data.should_show" },
                e("t-paragraph", {}, e("u-text", { use: "data.example_text" }))
              ),
              e(
                "u-if",
                { check: "data.should_show_false" },
                e("t-paragraph", {}, e("u-text", { use: "data.example_text" }))
              )
            ),
          },
        },
      };

      window.TEST_TEXT = {
        title: "From Global",
      };
    </script>
    <script src="./dist/bundle.min.js"></script>
  </head>
  <body>
    <template id="example-block">
      <d-panel colour="surface" bordered>
        <l-row>
          <l-col xs="12">
            <slot></slot>
          </l-col>
        </l-row>
        <slot name="code"></slot>
      </d-panel>
    </template>
    <l-templated use="/layout.template.html" remote>
      <u-global var="CODE_EXAMPLES" key="ex">
        <form onsubmit="event.preventDefault()">
          <l-container>
            <l-row>
              <l-col xs="12">
                <t-heading id="install" level="h2">
                  <t-localised>Installation</t-localised>
                </t-heading>
                <t-paragraph>
                  <t-localised>
                    This project can be loaded in a couple of ways
                  </t-localised>
                </t-paragraph>
                <t-heading level="h3">
                  <t-localised>CDN (Recommended)</t-localised>
                </t-heading>
                <t-code
                  language="html"
                  file="*.html"
                  accessor="ex.cdn_install.toString()"
                ></t-code>
                <t-paragraph>
                  <t-localised>
                    This will allow you to use all components with ease in any
                    project if you include this in the head of the HTML. It can
                    be included after the body but this can result in flashes on
                    load, as unknown components will be rendered as if they were
                  </t-localised>
                </t-paragraph>
              </l-col>
              <l-col xs="12">
                <t-heading id="data" level="h2">
                  <t-localised>Data Fetching</t-localised>
                </t-heading>
                <t-paragraph>
                  Page data can be collected using a few elements in the u-
                  namespace. They are designed for fetching data such as UI text
                  and should not be thought of as a way to handle complex
                  application data. For this use case, consider a framework such
                  as React, VueJS, Angular, or many more. This library will work
                  with all of them.
                </t-paragraph>
              </l-col>
              <l-col xs="12">
                <div data-example="fetch.external.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="fetch.external.locale"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="fetch.global.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="fetch.each.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="fetch.if.basic"></div>
              </l-col>
              <l-col xs="12">
                <t-heading id="forms" level="h2">
                  <t-localised>Forms</t-localised>
                </t-heading>
                <t-paragraph>
                  <t-localised>
                    All forms are compatible with the standard HTML form
                    element. The provide added functionality around validation
                    and styling.
                  </t-localised>
                </t-paragraph>
                <t-paragraph>
                  <t-localised>
                    They are included in the f- namespace and must be withing a
                    form element to function.
                  </t-localised>
                </t-paragraph>
              </l-col>
              <l-col xs="12">
                <div data-example="form.select.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.date.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.textarea.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.text.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.toggle.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.multiselect.basic"></div>
              </l-col>
              <l-col xs="12">
                <div data-example="form.singleselect.basic"></div>
              </l-col>
            </l-row>
          </l-container>
        </form>
      </u-global>
    </l-templated>
    <div style="position: fixed; bottom: 1rem; right: 1rem">
      <f-button type="button" id="toc" colour="primary">
        <t-icon name="menu-3" size="body_large" colour="primary" text></t-icon>
      </f-button>
    </div>
    <o-offcanvas trigger="#toc" size="small">
      <span slot="title">
        <t-localised default="en-GB">
          <span slot="en-GB">Contents</span>
        </t-localised>
      </span>
      <t-link href="#install" block>
        <t-localised default="en-GB">
          <span slot="en-GB">Installation</span>
        </t-localised>
      </t-link>
      <t-link href="#data" block>
        <t-localised default="en-GB">
          <span slot="en-GB">Fetching Data</span>
        </t-localised>
      </t-link>
      <t-link href="#grid" block>
        <t-localised default="en-GB">
          <span slot="en-GB">The Grid</span>
        </t-localised>
      </t-link>
      <t-link href="#forms" block>
        <t-localised default="en-GB">
          <span slot="en-GB">Forms</span>
        </t-localised>
      </t-link>
    </o-offcanvas>
    <script>
      document.querySelectorAll("div[data-example]").forEach((t) => {
        const accessor_statement = t.getAttribute("data-example");
        const accessor = new Function(
          "data",
          "return data." + accessor_statement
        );
        const data = accessor(window.CODE_EXAMPLES);
        t.innerHTML = `
          <l-templated use="example-block">
            ${data.toString()}
            <t-code
              slot="code"
              language="html"
              file="*.html"
              accessor="ex.${accessor_statement}.toString()"
              flush
            ></t-code>
          </l-templated>`;
      });
    </script>
  </body>
</html>
